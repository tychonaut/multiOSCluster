#example template for exporting all view parameter
#pick the ones you need and create individual settings files for your IGs
#this is a comment
#macros are in ${}
#macros are case sensitive, no white spaces allowed
#first there is the settings section, nothing is written to file
## Actually, this should be ZXY, afater the pain with paraview and the confirmation in openSpace code.
## but whatever Vioso may think, I keep it like this, maybe the documenter 
## didn't get the "read right to left or bottom to top"- rule of matrix or quaternion multiplication"
## BUT KEEP THIS IN MIND IS STH. IS NOT RIGHT!
${!rotationOrder,YXZ}#rotationOrder,param=[XYZ,XZY,YXZ,YZX,ZXY,ZYX]
${!angles,degree}#angles,param=[degree,radian]
${!header}#start of file header, following is written first to the file
<?xml version="1.0" ?>

<!--

    Export of frusta from VIOSO Calibrator views, date: ${date,%Y%m%d%H%M%S}.#date,format=see strftime



	WARNING ON CONFIG FILES GENERATED BY A TEMPLATE FROM VIOSO CALIBRATOR:
	
		IF IN AN OPENSPACE INSTALLATION DIRECTORY, THIS FILE WILL BE CONTINUOUSLY OVERWRITTEN BY rsync!!111 
		
		Only edit the exported file on a master/development machine, 
		e.g. in a path like <multiOSCluster dir>/appControl/OpenSpace/profiles/<currently active profile>/config/openspace_sgct_config.xml ,
		<currently active profile> is found in   
			<multiOSCluster dir>/config/apps.json, key  "apps.<OS>.OpenSpace.profile"
		(Don't forget to check it into git.)
		
		In order to work with OpenSpace in the dome, this (and other) 
		file must be distributed to the installation folder of ALL cluster computers
		to the relevant cluster machines.
		In a (MSYS2) bash, execute
		 <multiOSCluster dir>/appControl/rsyncAppConfigToCluster.sh OpenSpace


	
	
	IMPORTANT NOTES ON THE EXPORT PROCESS:
	
		Due to several limitations of the Vioso export, there must be several steps performed AFTER Vioso Calibrator has generated a config file from a template:
		
		1. The order of cluster nodes may not be correct (e.g. 4 1 2 3 5 instead of 1 2 3 4 5). Reorder nodes manually
		2. The "adress" attribute is written by Vioso with some clutter (not only the IP). Manually delete everything but the IP
		3. The slave IPs may be "10.0.0.2x" or "10.0.10.2x". Change them to the fist variant (all nodes must communicte over the same network).
		4. The "port" attribute is not exportable by VIOSO. Enter ports manually, e.g. master: 20401, RT1:20402 .. RT5:20406	
	
-->


<Cluster 
	masterAddress="10.0.0.5" 
>

    <Settings>
        <Display swapInterval="0" />
    </Settings>
	
	
    <Scene>
		
        <Orientation yaw="0.0" pitch="0.0" roll="0.0" />
        <Offset x="0.0" y="0.0" z="0.0" />
        <Scale value="1.0" />
		
    </Scene>
    

	<!-- Master node, no MPCDI stuff required here -->
	<!--
		address="172.21.213.208"
    -->
	<Node 
		port="20401"
		address="10.0.0.5" 
	>

        <Window fullScreen="false" border="true"		>
            <Stereo type="none" />
            <Pos x="100" y="100" />
            <Size x="1680" y="1050" />

            <Viewport>
                <Pos x="0.0" y="0.0" />
                <Size x="1.0" y="1.0" />

			
                <PlanarProjection>
                    <FOV down="25.267007923362" left="40.0" right="40.0" up="25.267007923362" />
                    <Orientation heading="0.0" pitch="0.0" roll="0.0" />
                </PlanarProjection>
            	
				<!--
                <FisheyeProjection fov="180" quality="1k"  tilt="21.0">
                    <Background r="1.0" g="0.1" b="0.1" a="1.0" />
                </FisheyeProjection>
				-->

            </Viewport>

        </Window>

    </Node>



${!channel}#!channel starts the channels section, this is written for every channel
	
	
	<!-- RealTime node ${name} +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->


	<!-- PLEASE REORDER NODES MANUALLY -->
	<Node 
		address="MANUALLY DELETE THE CLUTTER, SEE INSTRUCTIONS ABOVE ${name}"
		port="ADAPT MANUALLY, SEE INSTRUCTIONS ABOVE" 
	>
		<Window 
			fullScreen="false" 
			border="false"		
		>
            <Stereo type="none" />

            <Pos  x="1920" y="0" />
			<Size x="2560" y="1600" />
			
            <Viewport>

                <Pos x="0.0" y="0.0" />
                <Size x="1.0" y="1.0" />
                
				<PlanarProjection>
                    
					<FOV 
						up="${fovT,0.5}" 
						down="${fovB,0.5}" 
						left="${fovL,0.5}" 
						right="${fovR,0.5}"  
					/>
				
                    <Orientation 
						heading="${aY,0.5}" 
						pitch="${aX,0.5}" 
						roll="${aZ,0.5}" 
					/>
					
                </PlanarProjection>
				
            </Viewport>
        </Window>
		
    </Node> 
	

	

${!footer}#starts the footer, this is written at the end of the file, once all channels are written	
	
	<User eyeSeparation="0.06">
        <Pos x="0.0" y="0.0" z="0.0" />
    </User>
	
	
</Cluster>